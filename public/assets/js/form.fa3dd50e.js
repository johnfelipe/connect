import{f as i}from"./form.2aa3eae8.js";import{E as n}from"./EditorWrapper.16875b7a.js";import{f as l}from"./modal-form.66d69de9.js";import{n as o}from"./_plugin-vue2_normalizer.7b9a2fe2.js";import{n as m}from"./momentz.be6fd052.js";import{s as c}from"./app.e5c25aad.js";const d={extends:l,props:{meta:{type:Object,required:!0}},data(){return{formData:{uuid:null,name:"",slug:"",description:"",parent:null,type:null},hasSlug:!1,hasParent:!1,preRequisite:{options:[]},formLabels:{name:$t("option.props.name"),slug:$t("option.props.slug"),description:$t("option.props.description"),parent:$t("option.props.parent"),type:$t("option.props.type")},initUrl:"options",dataType:"option",dataTypeArr:"options",propertyToMatch:"name",entityTitle:"option.option"}},watch:{meta:{deep:!0,handler(r,e){this.formData.type=r.optionType,this.entityTitle=r.entityTitle,this.dataType=r.dataType,this.dataTypeArr=r.dataTypeArr,this.hasSlug=r.hasSlug,this.hasParent=r.hasParent}}},methods:{createSlug(){this.showKeepAdding&&this.formData.name!=this.initialFormData.name?this.formData.slug=this.formData.name.kebabCase():this.formData.slug=this.formData.slug?this.formData.slug:this.formData.name.kebabCase()},preSubmit(){if(this.createSlug(),this.hasParent&&!this.formData.parent){this.$toasted.error($t("global.invalid",{attribute:$t("option.props.parent")}),this.$toastConfig.error);return}this.submit()}},mounted(){this.getInitialData()},created(){this.formData.type=this.meta.optionType,this.entityTitle=this.meta.entityTitle,this.dataType=this.meta.dataType,this.dataTypeArr=this.meta.dataTypeArr,this.hasSlug=this.meta.hasSlug,this.hasParent=this.meta.hasParent}};var f=function(){var e=this,a=e._self._c;return a("form",{staticClass:"has-fixed-footer",on:{submit:function(t){return t.preventDefault(),e.preSubmit.apply(null,arguments)}}},[a("h5",{staticClass:"text-center"},[e._v(e._s(e.$t("global.add",{attribute:e.$t("option.option")})))]),a("hr"),a("animated-loader",{attrs:{"is-loading":e.isLoading,"loader-color":e.vars.loaderColor}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 mb-4"},[a("base-input",{attrs:{"auto-focus":"",label:e.formLabels.name,type:"text",error:e.formErrors.name,required:""},on:{"update:error":function(t){return e.$set(e.formErrors,"name",t)},blur:e.createSlug},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),e.hasSlug?a("div",{staticClass:"col-12 mb-4"},[a("base-input",{attrs:{label:e.formLabels.slug,type:"text",error:e.formErrors.slug,format:"kebabCase",required:""},on:{"update:error":function(t){return e.$set(e.formErrors,"slug",t)},focus:e.createSlug,blur:e.createSlug},model:{value:e.formData.slug,callback:function(t){e.$set(e.formData,"slug",t)},expression:"formData.slug"}})],1):e._e(),e.hasParent?a("div",{staticClass:"col-12 mb-4"},[a("base-select",{attrs:{options:e.preRequisite.options,label:e.formLabels.parent,error:e.formErrors.parent,"allow-empty":!0,disabled:e.isLoading,"track-by":"uuid","show-by":"nameWithParents"},on:{"update:error":function(t){return e.$set(e.formErrors,"parent",t)}},model:{value:e.formData.parent,callback:function(t){e.$set(e.formData,"parent",t)},expression:"formData.parent"}})],1):e._e(),a("div",{staticClass:"col-12 mb-4"},[a("base-input",{attrs:{label:e.formLabels.description,type:"text",error:e.formErrors.description},on:{"update:error":function(t){return e.$set(e.formErrors,"description",t)}},model:{value:e.formData.description,callback:function(t){e.$set(e.formData,"description",t)},expression:"formData.description"}})],1)]),a("div",{staticClass:"form-footer fixed-footer mt-5"},[a("div",{staticClass:"left-side"},[a("base-button",{attrs:{type:"button",design:"light",tabindex:"-1"},on:{click:function(t){return e.close()}}},[a("i",{staticClass:"fas fa-chevron-left"}),e._v(" "+e._s(e.$t("general.cancel")))])],1),a("div",{staticClass:"right-side"},[a("base-button",{attrs:{type:"submit",design:"primary"}},[a("i",{staticClass:"fas fa-save"}),e._v(" "+e._s(e.$t("global.save",{attribute:e.$t("option.option")})))])],1)])],1)},p=[],u=o(d,f,p,!1,null,null,null,null);const b=u.exports,s=c.getters["config/vars"],g={extends:i,components:{EditorWrapper:n,OptionForm:b},data(){return{formData:{uuid:null,title:"",agenda:"",description:"",startDateTime:m(s.serverDateTimeFormat),period:60,type:null,category:null,identifier:"",maxParticipantCount:1e3,accessibleViaLink:!1,hasEvent:!1,shouldRemind:!1,remindBefore:5,accessibleToMembers:!1,isPam:!1,isPaid:!1,fee:0},preRequisite:{types:[],segments:[],categories:[]},formLabels:{title:$t("meeting.props.title"),agenda:$t("meeting.props.agenda"),identifier:$t("meeting.enter_meeting_code"),maxParticipantCount:$t("meeting.config.max_participant_count"),description:$t("meeting.props.description"),startDateTime:$t("meeting.props.start_date_time"),period:$t("meeting.props.estimated_period"),type:$t("meeting.props.type"),category:$t("meeting.meeting_category.category"),accessibleViaLink:$t("meeting.props.accessible_via_link"),hasEvent:$t("meeting.props.has_event"),shouldRemind:$t("meeting.props.should_remind"),remindBefore:$t("meeting.props.remind_before"),accessibleToMembers:$t("meeting.props.only_accessible_to_members"),isPam:$t("meeting.props.is_pam"),isPaid:$t("meeting.props.is_paid"),fee:$t("meeting.props.fee")},initUrl:"meetings",dateTimeFields:["startDateTime"]}},computed:{maxParticipantAllowed(){return this.configs.meeting.maxParticipantCount?this.configs.meeting.maxParticipantCount:999999}},methods:{afterEditData(){this.duplicate&&(this.formData.identifier="",this.formData.startDateTime=moment().format(s.serverDateTimeFormat))},isPamChanged(){this.formData.isPam&&(this.formData.accessibleToMembers=!1,this.formData.isPaid=!1,this.formData.fee=0)},accessibleToMembersChanged(){this.formData.accessibleToMembers&&(this.formData.isPam=!1,this.formData.isPaid=!1,this.formData.fee=0)},isPaidChanged(){this.formData.isPaid&&(this.formData.isPam=!1,this.formData.accessibleToMembers=!1)}},mounted(){this.getInitialData()}};var h=function(){var e=this,a=e._self._c;return a("form",{on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[a("animated-loader",{attrs:{"is-loading":e.isLoading||e.isFetching,"loader-color":e.vars.loaderColor}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 col-md-5"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 mb-3"},[a("base-input",{attrs:{"auto-focus":"",label:e.formLabels.title,type:"text",error:e.formErrors.title,required:""},on:{"update:error":function(t){return e.$set(e.formErrors,"title",t)}},model:{value:e.formData.title,callback:function(t){e.$set(e.formData,"title",t)},expression:"formData.title"}})],1),a("div",{staticClass:"col-12 mb-3"},[a("base-textarea",{attrs:{rows:"8",label:e.formLabels.agenda,error:e.formErrors.agenda,required:""},on:{"update:error":function(t){return e.$set(e.formErrors,"agenda",t)}},model:{value:e.formData.agenda,callback:function(t){e.$set(e.formData,"agenda",t)},expression:"formData.agenda"}})],1)])]),a("div",{staticClass:"col-12 col-md-7"},[a("fieldset",{staticClass:"fieldset primary"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 col-md-6 mb-3"},[a("base-select",{attrs:{options:e.preRequisite.types,label:e.formLabels.type,error:e.formErrors.type,required:"","allow-empty":!1,"preselect-first":""},on:{"update:error":function(t){return e.$set(e.formErrors,"type",t)}},model:{value:e.formData.type,callback:function(t){e.$set(e.formData,"type",t)},expression:"formData.type"}})],1),a("div",{staticClass:"col-12 col-md-6 mb-3"},[a("base-select",{attrs:{options:e.preRequisite.categories,label:e.formLabels.category,error:e.formErrors.category,required:"","allow-empty":!1,"preselect-first":"","add-new-modal":!0,"needed-permission":"access-meeting-config"},on:{"update:error":function(t){return e.$set(e.formErrors,"category",t)}},scopedSlots:e._u([{key:"addNewModal",fn:function(){return[a("option-form",{attrs:{meta:{optionType:"meeting_category",dataType:"category",dataTypeArr:"categories",entityTitle:"meeting.meeting_category.category"}},on:{close:e.newModalClose}})]},proxy:!0}]),model:{value:e.formData.category,callback:function(t){e.$set(e.formData,"category",t)},expression:"formData.category"}})],1),a("div",{staticClass:"col-12 col-md-6 mb-3"},[a("base-input",{staticClass:"mb-3",attrs:{label:e.formLabels.startDateTime,"addon-right-icon":"far fa-calendar-alt",type:"text",error:e.formErrors.startDateTime,"is-wrapper":!0,required:""},on:{"update:error":function(t){return e.$set(e.formErrors,"startDateTime",t)}},model:{value:e.formData.startDateTime,callback:function(t){e.$set(e.formData,"startDateTime",t)},expression:"formData.startDateTime"}},[a("date-picker",{staticClass:"form-control datepicker",attrs:{config:e.vars.datetimepickerConfig},model:{value:e.formData.startDateTime,callback:function(t){e.$set(e.formData,"startDateTime",t)},expression:"formData.startDateTime"}})],1)],1),a("div",{staticClass:"col-12 col-md-6 mb-3"},[a("base-input",{staticClass:"mb-3",attrs:{label:e.formLabels.period,type:"number",error:e.formErrors.period,required:"","select-on-focus":"","addon-right-text":e.$t("list.general.durations.minutes")},on:{"update:error":function(t){return e.$set(e.formErrors,"period",t)},wheel:function(t){t.stopPropagation(),t.preventDefault()}},model:{value:e.formData.period,callback:function(t){e.$set(e.formData,"period",t)},expression:"formData.period"}})],1),a("div",{staticClass:"col-12 col-md-6 mb-3"},[a("base-input",{attrs:{label:e.formLabels.identifier,type:"text",error:e.formErrors.identifier},on:{"update:error":function(t){return e.$set(e.formErrors,"identifier",t)}},model:{value:e.formData.identifier,callback:function(t){e.$set(e.formData,"identifier",t)},expression:"formData.identifier"}})],1),a("div",{staticClass:"col-12 col-md-6 mb-3"},[a("base-input",{attrs:{label:e.formLabels.maxParticipantCount,type:"number",error:e.formErrors.maxParticipantCount,min:2,max:e.maxParticipantAllowed,step:1},on:{"update:error":function(t){return e.$set(e.formErrors,"maxParticipantCount",t)}},model:{value:e.formData.maxParticipantCount,callback:function(t){e.$set(e.formData,"maxParticipantCount",t)},expression:"formData.maxParticipantCount"}})],1)])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 col-md-8 mt-element"},[a("editor-wrapper",{attrs:{label:e.formLabels.description,error:e.formErrors.description,height:"full"},on:{"update:error":function(t){return e.$set(e.formErrors,"description",t)}},model:{value:e.formData.description,callback:function(t){e.$set(e.formData,"description",t)},expression:"formData.description"}})],1),a("div",{staticClass:"col-12 col-md-4 mt-element"},[a("fieldset",{staticClass:"fieldset light h-100"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 mb-3"},[a("base-checkbox",{staticClass:"ml-3 mt-2",model:{value:e.formData.accessibleViaLink,callback:function(t){e.$set(e.formData,"accessibleViaLink",t)},expression:"formData.accessibleViaLink"}},[e._v(" "+e._s(e.formLabels.accessibleViaLink)+" ")])],1),a("div",{staticClass:"col-12 mb-3"},[a("base-checkbox",{staticClass:"ml-3 mt-2",model:{value:e.formData.hasEvent,callback:function(t){e.$set(e.formData,"hasEvent",t)},expression:"formData.hasEvent"}},[e._v(" "+e._s(e.formLabels.hasEvent)+" ")])],1),a("div",{staticClass:"col-12 mb-3"},[a("base-checkbox",{staticClass:"ml-3 mt-2",model:{value:e.formData.shouldRemind,callback:function(t){e.$set(e.formData,"shouldRemind",t)},expression:"formData.shouldRemind"}},[e._v(" "+e._s(e.formLabels.shouldRemind)+" ")])],1),e.formData.shouldRemind?a("div",{staticClass:"col-12 mb-3 px-4"},[a("base-input",{attrs:{label:e.formLabels.remindBefore,type:"number",error:e.formErrors.remindBefore,min:1,step:1,"addon-right-text":e.$t("list.general.durations.minutes")},on:{"update:error":function(t){return e.$set(e.formErrors,"remindBefore",t)}},model:{value:e.formData.remindBefore,callback:function(t){e.$set(e.formData,"remindBefore",t)},expression:"formData.remindBefore"}})],1):e._e(),e.configs.meeting&&e.configs.meeting.enablePam&&!e.formData.accessibleToMembers&&!e.formData.isPaid?a("div",{staticClass:"col-12 mb-3"},[a("base-checkbox",{staticClass:"ml-3 mt-2",on:{change:e.isPamChanged},model:{value:e.formData.isPam,callback:function(t){e.$set(e.formData,"isPam",t)},expression:"formData.isPam"}},[e._v(" "+e._s(e.formLabels.isPam)+" ")])],1):e._e()]),e.allowExtraInput&&!e.formData.isPam?[e.formData.isPaid?e._e():a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 mb-3"},[a("base-checkbox",{staticClass:"ml-3 mt-2",on:{change:e.accessibleToMembersChanged},model:{value:e.formData.accessibleToMembers,callback:function(t){e.$set(e.formData,"accessibleToMembers",t)},expression:"formData.accessibleToMembers"}},[e._v(" "+e._s(e.formLabels.accessibleToMembers)+" ")])],1)]),e.configs.meeting.enablePaidMeeting&&!e.formData.accessibleToMembers?a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 mb-3"},[a("base-checkbox",{staticClass:"ml-3 mt-2",on:{change:e.isPaidChanged},model:{value:e.formData.isPaid,callback:function(t){e.$set(e.formData,"isPaid",t)},expression:"formData.isPaid"}},[e._v(" "+e._s(e.formLabels.isPaid)+" ")])],1),e.formData.isPaid?a("div",{staticClass:"col-12 mb-3 px-4"},[a("base-input",{attrs:{label:e.formLabels.fee,type:"number",error:e.formErrors.fee,min:.01,step:.01,format:"currency"},on:{"update:error":function(t){return e.$set(e.formErrors,"fee",t)}},model:{value:e.formData.fee,callback:function(t){e.$set(e.formData,"fee",t)},expression:"formData.fee"}})],1):e._e()]):e._e()]:e._e()],2)])]),e.formHasErrors?a("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[a("h6",{staticClass:"m-0"},[e._v(e._s(e.$t("general.form_has_errors")))])]):e._e(),a("div",{staticClass:"form-footer mt-5"},[a("div",{staticClass:"left-side"},[a("base-button",{attrs:{type:"button",design:"light",tabindex:"-1"},on:{click:function(t){return e.$router.back()}}},[a("i",{staticClass:"fas fa-chevron-left"}),e._v(" "+e._s(e.$t("general.cancel")))]),e.showKeepAdding?a("base-checkbox",{staticClass:"ml-3 mt-2",model:{value:e.keepAdding,callback:function(t){e.keepAdding=t},expression:"keepAdding"}},[e._v(" "+e._s(e.$t("general.keep_adding"))+" ")]):e._e()],1),a("div",{staticClass:"right-side"},[a("base-button",{attrs:{type:"button",design:"light"},on:{click:e.reset}},[e._v(e._s(e.$t("general.reset")))]),a("base-button",{attrs:{type:"submit",design:"primary"}},[e._v(e._s(e.$t("global.save",{attribute:e.$t("meeting.meeting")})))])],1)]),e.showKeepAdding&&e.keepAdding?[a("keep-adding-form",{attrs:{"keep-adding-fields":e.keepAddingFields,"keep-adding-option":e.keepAddingOption,"keep-adding-selected-fields":e.keepAddingSelectedFields,"is-loading":e.isLoading},on:{optionUpdated:function(t){e.keepAddingOption=t},fieldsUpdated:function(t){e.keepAddingSelectedFields=t}}})]:e._e()],2)},D=[],v=o(g,h,D,!1,null,null,null,null);const T=v.exports;export{T as C};
